<p align="center"><a href="https://cloudinary.com" target="_blank">			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 96.77" width="500" height="97" fill="blue">
				<path
					d="M160.53 30.41a17.14 17.14 0 0 1 13.56 6.7.69.69 0 0 0 1 .11l5.71-4.55a.71.71 0 0 0 .11-1 26 26 0 0 0-20.61-10.13c-14.91 0-27 12.85-27 28.65s12.13 28.65 27 28.65a25.85 25.85 0 0 0 20.6-10.12.69.69 0 0 0-.12-1l-5.7-4.5a.71.71 0 0 0-1 .11A17.26 17.26 0 0 1 160.53 70c-10.19 0-18.16-8.7-18.16-19.79s7.97-19.8 18.16-19.8ZM188.27 19.91h7.16a.71.71 0 0 1 .71.71V77.4a.7.7 0 0 1-.7.7h-7.16a.71.71 0 0 1-.71-.71V20.62a.7.7 0 0 1 .7-.71ZM220.54 39.55c-9.49 0-19.09 6.72-19.09 19.57 0 11.29 8.21 19.81 19.09 19.81s19.17-8.52 19.17-19.81-8.24-19.57-19.17-19.57Zm10.53 19.57c0 6.52-4.53 11.44-10.53 11.44s-10.44-4.92-10.44-11.44 4.49-11.2 10.44-11.2 10.53 4.81 10.53 11.2ZM278.3 40.37h-7.16a.7.7 0 0 0-.71.7v19c0 7.42-5.12 10.05-9.51 10.05-3.88 0-7.79-2.93-7.79-9.48V41.07a.7.7 0 0 0-.71-.7h-7.16a.7.7 0 0 0-.7.7v20.5c0 11.25 5.09 17.44 14.34 17.44 3.36 0 8.8-1.93 10.84-6.19l.69.14v4.44a.71.71 0 0 0 .71.71h7.16a.71.71 0 0 0 .71-.71V41.07a.7.7 0 0 0-.71-.7ZM322.27 19.91h-7.17a.7.7 0 0 0-.7.71V46l-.44-.7c-2.18-3.51-6.87-5.78-11.95-5.78-8.76 0-17.62 6.75-17.62 19.65 0 11.25 7.61 19.73 17.69 19.73 3.84 0 9.25-1.54 11.88-5.86l.44-.72v5.08a.7.7 0 0 0 .7.71h7.17a.7.7 0 0 0 .7-.71V20.62a.7.7 0 0 0-.7-.71Zm-8 39.21a11 11 0 0 1-10.75 11.36c-5.86 0-10.45-5-10.45-11.36s4.59-11.2 10.45-11.2a11 11 0 0 1 10.72 11.2ZM333 40.37h7.16a.7.7 0 0 1 .7.7V77.4a.7.7 0 0 1-.7.7H333a.71.71 0 0 1-.71-.71V41.07a.71.71 0 0 1 .71-.7ZM336.61 21.06a5.57 5.57 0 0 0-5.69 5.57 5.64 5.64 0 0 0 5.69 5.58 5.54 5.54 0 0 0 5.61-5.58 5.48 5.48 0 0 0-5.61-5.57ZM370.35 39.55c-3.14 0-8.72 1.69-10.85 6.19l-.69-.14v-4.53a.7.7 0 0 0-.71-.7h-7.16a.7.7 0 0 0-.7.7V77.4a.7.7 0 0 0 .7.71h7.16a.71.71 0 0 0 .71-.71v-19c0-7.36 5.12-10 9.51-10 3.88 0 7.79 2.91 7.79 9.4v19.6a.71.71 0 0 0 .71.71H384a.71.71 0 0 0 .71-.71V56.91c-.02-11.19-5.12-17.36-14.36-17.36ZM427.48 40.37h-7.16a.7.7 0 0 0-.71.7v5l-.43-.7c-2.19-3.51-6.88-5.78-12-5.78-8.75 0-17.62 6.75-17.62 19.65 0 11.25 7.61 19.73 17.7 19.73 3.83 0 9.24-1.54 11.88-5.86l.43-.72v5.01a.71.71 0 0 0 .71.71h7.16a.7.7 0 0 0 .7-.71V41.07a.7.7 0 0 0-.66-.7Zm-8 18.75a11 11 0 0 1-10.78 11.36c-5.86 0-10.44-5-10.44-11.36s4.58-11.2 10.44-11.2a11 11 0 0 1 10.76 11.2ZM460.15 40.5a13.66 13.66 0 0 0-5.14-1c-4.76 0-8.22 2.85-10 8.25l-.64-.09v-6.59a.7.7 0 0 0-.71-.7h-7.16a.7.7 0 0 0-.71.7V77.4a.71.71 0 0 0 .71.71h7.24a.7.7 0 0 0 .7-.71V65c0-14.8 5.91-17 9.44-17a11 11 0 0 1 4.33.9.72.72 0 0 0 .61 0 .7.7 0 0 0 .36-.48l1.42-7.11a.71.71 0 0 0-.45-.81ZM499.88 40.68a.69.69 0 0 0-.59-.31h-7.71a.72.72 0 0 0-.66.45L481.59 65l-9.42-24.18a.72.72 0 0 0-.66-.45h-7.86a.69.69 0 0 0-.58.31.7.7 0 0 0-.07.66l14 34.38-7.73 20.09a.71.71 0 0 0 .66 1h7.5a.69.69 0 0 0 .65-.45l21.86-55a.69.69 0 0 0-.06-.68ZM97.91 28.11A40.38 40.38 0 0 0 59.73 0 39.62 39.62 0 0 0 24.6 20.87a29.88 29.88 0 0 0-7.21 56.56l.75.34h.05v-8.5a22.29 22.29 0 0 1 9.29-41.16l2.1-.22.92-1.89A32.15 32.15 0 0 1 59.73 7.57a32.7 32.7 0 0 1 31.55 25l.72 2.86h3a18.53 18.53 0 0 1 18.15 18.46c0 7.05-4.07 12.82-11 15.74v8.06l.5-.16c11.14-3.65 18.06-12.71 18.06-23.64a26.19 26.19 0 0 0-22.8-25.78Z"></path>
				<path
					d="m45.07 76.79 1.66 1.66a.33.33 0 0 1-.23.56H33.4a6 6 0 0 1-6-6V47.57a.33.33 0 0 0-.33-.33h-2.8a.33.33 0 0 1-.24-.56l11.12-11.12a.33.33 0 0 1 .47 0l11.11 11.12a.33.33 0 0 1-.23.56h-2.84a.34.34 0 0 0-.34.33v25a6 6 0 0 0 1.75 4.22ZM69.64 76.79l1.67 1.66a.33.33 0 0 1-.24.56H58a6 6 0 0 1-6-6V54a.34.34 0 0 0-.33-.34h-2.83a.33.33 0 0 1-.23-.56L59.72 42a.33.33 0 0 1 .47 0l11.12 11.08a.33.33 0 0 1-.24.56h-2.84a.34.34 0 0 0-.33.34v18.59a6 6 0 0 0 1.74 4.22ZM94.22 76.79l1.66 1.66a.33.33 0 0 1-.23.56H82.54a6 6 0 0 1-6-6V60.38a.33.33 0 0 0-.33-.33h-2.8a.33.33 0 0 1-.23-.57L84.3 48.37a.32.32 0 0 1 .46 0l11.12 11.11a.33.33 0 0 1-.23.57H92.8a.33.33 0 0 0-.33.33v12.19a6 6 0 0 0 1.75 4.22Z"></path>
			</svg>
</a></p>

<h1 align="center">
 Creating Engaging Product Packaging QR Codes
</h1>

Cloudinary is a Software-as-a-Service (SaaS) solution for managing all your web or mobile application’s media assets in
the cloud. Cloudinary offers an end-to-end solution for all your image and video needs, including the upload, storage,
administration, transformation and optimized delivery.

Laravel is a PHP framework developed with developer productivity in mind. The framework also aims to evolve with the web and has already incorporated several new features and ideas in the web development world—such as job queues, **API authentication** out of the box, real-time communication, and much more.

## Introduction

Product Packaging is the first thing a customer sees when looking at a product. In this article, we will use Cloudinary to create engaging and compelling product packaging embedded with QR codes that will provide additional product details.

Let's get started.

## PHPSandbox and Github

The final project can be viewed on [PHPSandbox]( https://phpsandbox.io/e/x/imdid?layout=EditorPreview&defaultPath=%2F&theme=dark&showExplorer=no&openedFiles=) and the entire source code is available on my [Github](https://github.com/victorokech/cloudinary-product-qrcodes) repository.

## Prerequisites

Using Cloudinary in your Laravel projects is pretty straightforward. However, for you to be able to easily follow along,
you need to have a good command of your terminal, Git and entry knowledge of PHP specifically with the Laravel
framework.

## Getting Started

Being that Laravel is a PHP Framework, we will need Composer. Like any modern PHP framework, Laravel uses Composer to manage its dependencies. So, before we can
start ensure you have Composer installed on your machine. Follow step 1 below to install Composer and PHP.

1. Install [Composer](https://getcomposer.org/) and [PHP](https://www.php.net/manual/en/install.windows.tools.php) on
   your development or production machine.
2. Install Laravel
   
   1. Via Composer:
      
      `composer create-project --prefer-dist laravel/laravel cloudinary-video-slideshow`
   2. Via Laravel Installer
      
      `composer global require laravel/installer`
      
      `laravel new cloudinary-video-slideshow`
3. In step 2 above we have installed the Laravel Installer and used it to scaffold a new application in the folder `cloudinary-video-slideshow`. With Laravel installed, we should be able to start and test the server ensuring everything is okay. Change the directory to the project folder and run the local development server by typing the following commands:
   
   `cd cloudinary-video-slideshow`
   
   `php artisan serve`

The Laravel project is now up and running. When you open `http://localhost:8000` on your computer, you should see the image below:

![Laravel Server Running](https://res.cloudinary.com/dgrpkngjn/image/upload/v1655887283/watermark-api/assets/laravel-running_zqk8ol.png)

## Setting up Cloudinary’s Laravel SDK

Cloudinary has a tonne of features from media upload, storage, administration, and manipulation to optimization and delivery. In this article, we will use image transformation to create product labels with embedded QR codes.

1. Sign up for a free Cloudinary account then navigate to the Console page and take note of your Cloud name, API Key and API Secret.
   ![Cloudinary Dashboard](https://res.cloudinary.com/dgrpkngjn/image/upload/v1655976836/assets/cloudinary_dashboard.png)
2. Install [Cloudinary’s Laravel SDK](https://github.com/cloudinary-labs/cloudinary-laravel#installation):
   
   `composer require cloudinary-labs/cloudinary-laravel`

**Note**: Please ensure you follow all the steps in the #Installation section. Publish the configuration file and add
the Cloudinary credentials you noted in Step 1 to the `.env` file.

```
CLOUDINARY_API_KEY=YOUR_CLOUDINARY_API_KEY
CLOUDINARY_API_SECRET=YOUR_CLOUDINARY_API_SECRET
CLOUDINARY_CLOUD_NAME=YOUR_CLOUDINARY_CLOUD_NAME
```

## Product Package Details

We will need a UI to collect product details, for this, we will use the Laravel package Livewire to build this.

1. Install Livewire Package by running the following command in your Laravel project:
   
   `composer require livewire/livewire`
2. Include Livewire scripts and styles on every page that will be using Livewire. In our case `welcome.blade.php`:

```html
...
    @livewireStyles
</head>
<body>
    ...
  
    @livewireScripts
</body>
</html>
```

3. We will then create a Livewire Component to handle our image uploads:
   
   `php artisan make:livewire ProductPackaging`

This will create two files, first `app/Http/Livewire/ProductPackaging.php` and the other one
in `resources/views/livewire/product-packaging.blade.php`

Now you can use this component anywhere in your Laravel project using the following snippet:

`<livewire:product-packaging/>`

or

`@livewire('product-packaging')`

3. Open `resources/views/welcome.blade.php` and add the following code within the `<body></body>` tags as shown below:

```html
<body class="antialiased">
  <div>
    @livewire('product-packaging')
  </div>
</body>
```

This includes the Livewire component we created earlier in our `welcome.blade.php`.

**Note:** Please ensure you go through the [Livewire documentation](https://laravel-livewire.com/docs/2.x/quickstart), to learn how to install and set it up.

3. Open the file `resources/views/livewire/product-packaging.blade.php` and populate it with the following code:

```html
<form class="mb-5" wire:submit.prevent="store">
	<div class="form-group row mt-3 mb-3">
		<div class="input-group mb-3">
			<input id="package" type="file" class="form-control @error('package') is-invalid @enderror"
			       placeholder="Choose files..." wire:model="package">
			<label class="input-group-text" for="package">
				Upload Product Packaging...
			</label>
			@error('package')
			<div class="invalid-feedback">{{ $message }}</div>
			@enderror
		</div>
		<div class="input-group mb-5">
			<label class="input-group-text" for="location">QRCode Position</label>
			<select id="location" type="file" class="form-select @error('location') is-invalid @enderror"
			        wire:model="location">
				<option selected>Select Position ...</option>
				<option selected value="north_east">Top Right</option>
				<option value="north_west">Top Left</option>
				<option value="south_east">Bottom Right</option>
				<option value="south_west">Bottom Left</option>
				<option value="center">Center</option>
			</select>
			@error('location')
			<div class="invalid-feedback">{{ $message }}</div>
			@enderror
		</div>
		<div class="input-group mb-3">
			<span class="input-group-text" id="basic-addon1">Name</span>
			<input class="form-control @error('name') is-invalid @enderror" placeholder="Product Name"
			       aria-label="Product Name"
			       aria-describedby="basic-addon1" wire:model="name">
			@error('name')
			<div class="invalid-feedback">{{ $message }}</div>
			@enderror
		</div>
		<div class="input-group mb-3">
			<span class="input-group-text" id="basic-addon1">Price</span>
			<input type="number" class="form-control @error('price') is-invalid @enderror" placeholder="Product Price"
			       aria-label="Product Price"
			       aria-describedby="basic-addon1" wire:model="price">
			@error('price')
			<div class="invalid-feedback">{{ $message }}</div>
			@enderror
		</div>
		<div class="input-group mb-3">
			<span class="input-group-text" id="basic-addon1">Short Desc</span>
			<input type="text" class="form-control @error('short_desc') is-invalid @enderror"
			       placeholder="Product Short Desc"
			       aria-label="Product Short Desc"
			       aria-describedby="basic-addon1" wire:model="short_desc">
			@error('short_desc')
			<div class="invalid-feedback">{{ $message }}</div>
			@enderror
		</div>
		<div class="input-group mb-3">
			<span class="input-group-text" id="basic-addon1">Desc</span>
			<textarea class="form-control @error('desc') is-invalid @enderror" placeholder="Product Desc"
			          aria-label="Product Desc"
			          aria-describedby="basic-addon1" wire:model="desc"></textarea>
			@error('desc')
			<div class="invalid-feedback">{{ $message }}</div>
			@enderror
		</div>
		<small class="text-muted text-center mt-2" wire:loading wire:target="package">
			{{ __('Uploading') }}…
		</small>
	</div>
	<div class="text-center">
		<button type="submit" class="btn btn-sm btn-primary">
			{{ __('Create New Product') }}
			<i class="spinner-border spinner-border-sm ml-1 mt-1" wire:loading wire:target="store"></i>
		</button>
	</div>
</form>
```

This is our Livewire Component view, this basically will display a form with a couple of input fields and a button.

You will see the implementation in code shortly.

## Install QR Code Package

In practice, QR codes often contain data for a locator, identifier, or tracker that points to a website or application.

We will use the `simplesoftwareio/simple-qrcode` package to create the QR Codes that we will embed on our product labels.

`composer require simplesoftwareio/simple-qrcode`

## SQLite Database

Laravel makes interacting with databases extremely simple across a variety of supported databases using raw SQL. We will save our product details in the SQLite database. This is suitable for a small applications.

1. Edit your `.env` file and change `DB_CONNECTION` to `sqlite`
2. Open your `config/database.php` file and change the default to sqlite:
   
   `'default' => env('DB_CONNECTION', 'sqlite'),`
3. In the connections array, change sqlite's database key-value pair as shown below and leave the rest as is:

```php
'connections' => [
    'sqlite' => [
        'driver' => 'sqlite',
        'url' => env('DATABASE_URL'),
        'database' => database_path('database.sqlite'),
        'prefix' => '',
        'foreign_key_constraints' => env('DB_FOREIGN_KEYS', true),
    ],  
...
];
```

Run the command `php artisan migrate:status` to test if you are connected, you should see the response `Migration table not found`.

4. Next, we need to create the Product model. Run the command
   
   `php artisan make:model Product`
   
   This will create the file `app\Models\Product.php`. Open the file and add the following:
   
   ```php
   protected $fillable = [
   	'name',
   	'price',
   	'short_desc',
   	'desc',
   	'package'
   ];
   ```
5. Lastly, we will create the `create_products_table` migration:

   `php artisan make:migration create_products_table`
   
	Open the file created at `database\migrations\<timestamp>_create_products_table.php` and in the `up` method and the following code under `Schema:create`:
   
   ```php
   $table->id();
   $table->string('name');
   $table->float('price');
   $table->string('short_desc');
   $table->longText('desc');
   $table->string('package'); //will store URL of package
   $table->timestamps();
   ```
   
   Once done run the command `php artisan migrate`, this will create the products table with the above columns.

## Implementing the QR Code

Open the file `app/Http/Livewire/ProductPackaging.php`. Here, we are going to add a method that will handle the video selected by the user, and upload them to Cloudinary for video moderation.

Add the following code to this file.

1. First, we use Livewires `WithFileUploads` to help us with file uploads, then create the variables as shown.
   
   ```php
   use Livewire\WithFileUploads;
   
   public $package;
   public $name;
   public $price;
   public $short_desc;
   public $desc;
   public $location;
   public $qrCodeId;
   public $product;
   
   ...
   ```
2. Secondly, we will create the `store` method which will process the creation of the product label. First by creating the QR code, uploading it to [Cloudinary](https://cloudinary.com), then creating an image overlay.
   
   ```php
   public function store() {
    ...
   }
   ```
3. Let's see how this works:
   
   - Creating the QR code - we create the QR code from the product description submitted by the user and store it as `product_qr_code.svg` under the `storage` folder.
     
     ```php
     ...
     
     $qrCodeData = $this->desc;
     $qrCodePath = '../storage/product_qr_code.svg';
     QrCode::format('svg')->size(512)->style('round')->backgroundColor(255, 255, 255, 0)->color(0, 0, 0, 90)->margin(5)->generate($qrCodeData, $qrCodePath);
     
     ...
     ```
     
     We won't go to detail about how this package works, but you can reference the QR code package documentation [here](https://www.simplesoftware.io/#/docs/simple-qrcode) for more info on the numerous features it has.
   - Uploading the QR Code to Cloudinary - a simple upload of the QR code to Cloudinary. We are creating the `public_id` dynamically so we have unique ids for different products that we can reference later.
   
   ```php
   ...
   
      	$this->qrCodeId = cloudinary()->upload($qrCodePath, [
      		'folder'         => 'product-qrcodes',
      		'public_id'      => Str::uuid()->toString(),
      	])->getPublicId();
   
   ...
   ```
   
   - Embed the QR code - we embed the QR code created on the product packaging labels and save the details in our SQLite database:
     
     ```php
     ...
     
     $packaged = cloudinary()->upload($this->package->getRealPath(), [
        			'folder'         => 'product-qrcodes',
        			'transformation' => [
        				'overlay' => $this->qrCodeId,
        				'gravity' => $this->location,
        				'x'       => 0.02,
        				'y'       => 0.02,
        				'crop'    => 'scale',
        				'flags'   => 'relative',
        				'width'   => 0.15,
        				'opacity' => 80
        			],
        			])->getSecurePath();
     
        			$data['package'] = $packaged;
     
        			$this->product = Product::create($data);
        			$productName = $this->product->name;
     
      ...
     ```
     
     The code above uses `overlay`, `gravity` - we get this as an input from the user, `flags` - ensures that the overlay is resized based on the resolution of the underlying layer and lastly the `opacity` transformation.

The code above will be implemented within the `store` method, which will perform validation, create the QR then upload the images to Cloudinary to create the final product label.

On successful implementation, you should be able to see the following when you navigate to `http://localhost:8000`:

![Cloudinary Product Packaging](https://res.cloudinary.com/dgrpkngjn/image/upload/v1656851910/product-qrcodes/assets/cloudinary_product_labels_sdnzca.png)

On successful submission, you should see the product label created with a QR code.

![Cloudinary Product Packaging Success](https://res.cloudinary.com/dgrpkngjn/image/upload/v1656851716/product-qrcodes/assets/cloudinary_product_qrcode_f2k5pt.png)

When you scan this code with your phone it will provide you with detailed product information as shown:

![Cloudinary QR Code Scan](https://res.cloudinary.com/dgrpkngjn/image/upload/v1656851696/product-qrcodes/assets/cloudinary_qrcode_scan_jzgdsc.jpg)

## Conclusion

A QR code is a type of the matrix barcode invented in 1994 by the Japanese automotive company Denso Wave. A barcode is a machine-readable optical label that can contain information about the item to which it is attached.

There are multiple use cases for QR codes, but the most vital use has been in manufacturing and in retail where QR code labels are used to provide detailed information on shipping and retail products as well. 

Using Cloudinary we have been able to create product packaging labels that are engaging, providing shoppers with more details about their purchases. Check out Cloudinary for your A to Z media management - upload, storage, administration, manipulation, optimization and delivery.

[Get started](https://cloudinary.com/signup) with Cloudinary in your Laravel projects for FREE!

